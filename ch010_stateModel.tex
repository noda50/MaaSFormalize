%%======================================================================
\chapter{利用申告とその価値}
%\section{利用申告とその価値}
\label{ch:利用申告とその価値}
%% = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = =

%%----------------------------------------------------------------------
\section{利用申告モデル}
\label{s:利用申告モデル}
%% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

%%--------------------------------------------------
\subsection{利用申告}
%% - - - - - - - - - - - - - - - - - - - - - - - - -
利用申告\footnote{statement} $s_{a}(\V{d})$ を以下のように定義する。
  %%$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
  \begin{eqnarray}
    \mbox{利用申告} s_a(\V{d}) & : & \mbox{実デマンド $\V{d}$ を発生する確率}
  \\
    \mbox{デマンド} \V{d} & = & \Tuple{t,o,d,n}
  \\
    a & : & \mbox{利用者}
  \\
    t & : & \mbox{利用時刻}
  \\
    o,d & : & \mbox{乗車場所,降車場所}
  \\
    n & : & \mbox{乗車人数}
  \end{eqnarray}
  %%$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$

%%--------------------------------------------------
\subsection{申告集合}
%% - - - - - - - - - - - - - - - - - - - - - - - - -
未申告者を含む利用者全員の利用申告の集合(申告集合)を以下のように定義する。
  %%$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
  \begin{eqnarray}
    \mbox{申告集合} \V{S} & = & \Set{s_a | a \in \S{A}}
  \\
    \V{S}(\V{D}) & : & \mbox{デマンド集合$\V{D}$が発生する確率}
  \\
    \V{D} & : & \Set{\V{d}_a | a \in \S{A}} : \mbox{全員分のデマンド}
  \end{eqnarray}
  %%$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
ただし、未申告は、情報量(曖昧さ)最大となる分布としておく。

%%--------------------------------------------------
\subsection{運行計画}
%% - - - - - - - - - - - - - - - - - - - - - - - - -
運行計画 $\pi$ は、運行台数の配分、配車アルゴリズムなどの組であるとする。

%%--------------------------------------------------
\subsection{運行評価関数}
%% - - - - - - - - - - - - - - - - - - - - - - - - -
実デマンド $\V{D}$ に対する運行の評価関数を $u$ とする。
  %%$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
  \begin{eqnarray}
    u(\pi | \V{D}) & : & \mbox{運行計画 $\pi$ で
                               デマンド集合 $\V{D}$ をさばいた時の評価。
                               ベクトル or スカラー}
  \end{eqnarray}
  %%$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$

%%--------------------------------------------------
\subsection{予測評価関数}
%% - - - - - - - - - - - - - - - - - - - - - - - - -
運行評価関数を使って、申告集合 $\V{S}$ に対する予測評価関数は、
以下のように定義する。
  %%$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
  \begin{eqnarray}
    \Est{U}(\pi | \V{S})
      & = &
        \oint u(\pi | \V{D}) \V{S}(\V{D}) d \V{D}
  \end{eqnarray}
  %%$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$

%%--------------------------------------------------
\subsection{最適運行計画}
%% - - - - - - - - - - - - - - - - - - - - - - - - -
予測評価関数を用いて、最適運行計画を以下のように定義する。
  %%$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
  \begin{eqnarray}
    \Opt{\pi}(\V{S})
      & = &
        \arg\max_{\pi} \Est{U}(\pi | \V{S})
  \end{eqnarray}
  %%$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$

%%--------------------------------------------------
\subsection{申告更新の価値}
%% - - - - - - - - - - - - - - - - - - - - - - - - -
ある利用者エージェント $a$ 申告更新 $s_a \to s'_a$ とは、
$a$ の利用申告を、$s_a$ から $s'_a$ に変更することとする。
この申告更新を含んだ申告集合の変化は、以下のようになる。
  %%$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
  \begin{eqnarray}
    \V{S}' & = & (\V{S} \backslash \Set{s_a}) \cup\Set{s'_a}
  \end{eqnarray}
  %%$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$

これらに基づき、
申告更新 $s_a \to s'_a$ の価値 $v$ は、
以下のように表す。
  %%$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
  \begin{eqnarray}
    v(s_a \to s'_a) & = & v(\V{S} \to \V{S}')
  \\
      & = &
        \Est{U}(\Opt{\pi}' | \V{S}') -
        \Est{U}(\Opt{\pi} | \V{S})
  \\
    \Opt{\pi}' & = & \Opt{\pi}(\V{S}')
  \\
    \Opt{\pi} & = & \Opt{\pi}(\V{S})
  \end{eqnarray}
  %%$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$

%%--------------------------------------------------
\subsection{最大有効申告更新(者)}
%% - - - - - - - - - - - - - - - - - - - - - - - - -

  %%$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
  \begin{eqnarray}
    \arg\max_{s'_a} v(s_a \to s'_a)
    \\
    \arg\max_{a} v(s_a \to s'_a)
  \end{eqnarray}
  %%$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$


